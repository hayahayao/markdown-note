(function(e){function t(t){for(var r,i,s=t[0],u=t[1],c=t[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/markdown-note/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("bf02"),a=n.n(r);a.a},"0b7b":function(e,t,n){},2294:function(e,t,n){},"25b0":function(e,t,n){},"2da0":function(e,t,n){"use strict";var r=n("799a"),a=n.n(r);a.a},"31b4":function(e,t,n){},"3ace":function(e,t,n){},"459e":function(e,t,n){"use strict";var r=n("be43"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("63ff");var r=n("f8f9"),a=(n("96dd"),n("a60a"),n("e783"),n("8b1f"),n("6e6d")),o=n("7893"),i=n.n(o),s=(n("610a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)}),u=[],c=(n("034f"),n("6691")),l={},p=Object(c["a"])(l,s,u,!1,null,null,null),d=p.exports,f=(n("7cfd"),n("e6d1"),n("c478")),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("TheMenu"),n("el-main",{staticClass:"center-wrapper",nativeOn:{click:function(t){return e.handleClick(t)}}},[n("div",[e._v("Tap to add new note")])])],1)},m=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-aside",{staticStyle:{width:"65px"}},[n("el-menu",{attrs:{collapse:""}},e._l(e.items,(function(e){return n("BaseMenuItem",{key:e,attrs:{index:e,type:e}})})),1)],1)},v=[],g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-menu-item",{staticStyle:{padding:"0"},attrs:{index:e.index,type:e.type}},[n("el-tooltip",{attrs:{content:e.content,placement:"right"}},[n("router-link",{attrs:{to:e.to}},[n("i",{class:e.icon})])],1)],1)},k=[],x=(n("4634"),n("fafd"),n("68e0"),{props:{index:{type:String,required:!0},type:{type:String,required:!0}},computed:{to:function(){return{name:this.type,params:{from:this.$route.fullPath.slice(1)}}},icon:function(){var e=new Map([["new","el-icon-plus"],["notes","el-icon-document"],["notebooks","el-icon-notebook-2"],["tags","el-icon-collection-tag"]]);return e.get(this.type)},content:function(){var e=new Map([["new","新建笔记"],["notes","笔记"],["notebooks","笔记本"],["tags","标签"]]);return e.get(this.type)}}}),y=x,w=(n("2da0"),Object(c["a"])(y,g,k,!1,null,"599e9276",null)),$=w.exports,_={data:function(){return{items:["new","notes","notebooks","tags"]}},components:{BaseMenuItem:$}},S=_,O=(n("b211"),Object(c["a"])(S,b,v,!1,null,"464b3e68",null)),j=O.exports,R={components:{TheMenu:j},methods:{handleClick:function(){this.$router.push({name:"new",params:{from:"home",id:""}})}}},T=R,C=(n("459e"),Object(c["a"])(T,h,m,!1,null,"7cf83ad8",null)),N=C.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("TheMenu"),n("el-container",[n("TheNoteMenu"),n("el-main",[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("TheNoteInput"),n("TheNoteDisplay")],1)],1)],1)],1)},L=[],P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-header",{staticStyle:{height:"30px","margin-top":"20px"}},[n("span",[n("el-select",{attrs:{size:"mini",placeholder:"选择笔记本",filterable:""},on:{change:e.handleChangeNotebook},model:{value:e.notebookValue,callback:function(t){e.notebookValue=t},expression:"notebookValue"}},[n("el-option",{key:"new-notebook",attrs:{value:"new-notebook"}},[n("el-button",{attrs:{type:"text"}},[n("i",{staticClass:"el-icon-plus"}),e._v("创建新笔记本\n        ")])],1),e._l(e.notebooks,(function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})}))],2)],1),n("span",[n("el-select",{attrs:{size:"mini",placeholder:"选择标签",filterable:""},on:{change:e.handleAddTag},model:{value:e.tagValue,callback:function(t){e.tagValue=t},expression:"tagValue"}},[n("el-option",{key:"new-tag",attrs:{value:"new-tag"}},[n("el-button",{attrs:{type:"text"}},[n("i",{staticClass:"el-icon-plus"}),e._v("创建新标签\n        ")])],1),e._l(e.allTags,(function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})}))],2),e._l(e.noteTags,(function(t){return n("el-tag",{key:t.id,attrs:{closable:""},on:{close:function(n){return e.handleClose(t)}}},[e._v(e._s(t.title))])}))],2),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)},M=[],D=(n("bada"),{data:function(){return{notebookValue:"",tagValue:""}},computed:{notebooks:function(){return this.$store.getters.notebooks},noteTags:function(){return this.$store.getters["note/tags"]},allTags:function(){return this.$store.getters.tags}},methods:{handleChangeNotebook:function(e){if("new-notebook"===e)this.$router.push({name:"new-notebook",params:{from:this.$route.fullPath.slice(1),id:this.$store.getters["note/id"]}});else{var t=this.notebooks.find((function(t){return t.id===e}));this.$store.dispatch("note/updateNote",{notebook:{id:t.id,title:t.title}})}},handleAddTag:function(e){if("new-tag"===e)this.$router.push({name:"new-tag",params:{from:this.$route.fullPath.slice(1),id:this.$store.getters["note/id"]}});else{var t=this.allTags.find((function(t){return t.id===e}));this.$store.dispatch("note/addTag",{tag:{id:t.id,title:t.title}})}},handleClose:function(e){this.$store.dispatch("note/removeTag",{tag:e})},handleSave:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("note/saveNote");case 2:this.$router.push({name:"notes"});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.$store.dispatch("loadList",{type:"notebooks"}),this.$store.dispatch("loadList",{type:"tags"}),null!==this.$store.getters["note/notebook"]&&(this.notebookValue=this.$store.getters["note/notebook"].title)},beforeDestroy:function(){this.$store.dispatch("clearList",{type:"notebooks"}),this.$store.dispatch("clearList",{type:"tags"})}}),E=D,z=(n("b778"),Object(c["a"])(E,P,M,!1,null,"74df0b8e",null)),B=z.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-col",{attrs:{span:11}},[n("el-input",{attrs:{placeholder:"标题",clearable:""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),n("el-divider"),n("el-input",{attrs:{type:"textarea",placeholder:"Markdown内容",clearable:""},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)},q=[],Y={computed:{title:{get:function(){return this.$store.getters["note/title"]},set:function(e){this.$store.dispatch("note/updateNote",{title:e})}},content:{get:function(){return this.$store.getters["note/content"]},set:function(e){this.$store.dispatch("note/updateNote",{content:e})}}}},A=Y,H=Object(c["a"])(A,V,q,!1,null,null,null),J=H.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-col",{attrs:{span:11}},[n("h1",{staticClass:"my-title"},[e._v(e._s(e.title))]),n("el-divider"),n("div",{staticClass:"my-content",domProps:{innerHTML:e._s(e.htmlContent)}})],1)},G=[],K=n("2909"),Q=n.n(K),U={computed:{title:function(){return this.$store.getters["note/title"]},htmlContent:function(){return Q()(this.$store.getters["note/content"])}}},W=U,X=Object(c["a"])(W,F,G,!1,null,null,null),Z=X.exports,ee={props:{id:{type:String,required:!1}},components:{TheMenu:j,TheNoteMenu:B,TheNoteInput:J,TheNoteDisplay:Z},created:function(){this.id?this.$store.dispatch("note/loadNote",{id:this.id}):this.$store.dispatch("note/initNote")},beforeDestroy:function(){this.$store.dispatch("note/clearNote")}},te=ee,ne=(n("7400"),Object(c["a"])(te,I,L,!1,null,"7df63c4a",null)),re=ne.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("TheMenu"),n("TheNotesList")],1)},oe=[],ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",[n("el-table",{ref:"table",attrs:{data:e.notes,"highlight-current-row":"","row-key":"id"},on:{"current-change":e.handleCurrentChange,"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e._f("moment")(t.row.created,"YYYY/MM/DD HH:mm")))])]}}])}),n("el-table-column",{attrs:{prop:"title",label:"标题"}}),n("el-table-column",{attrs:{label:"笔记本"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.notebook?t.row.notebook.title:""))])]}}])}),n("el-table-column",{attrs:{label:"标签"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.tags,(function(t){return n("el-tag",{key:t.id},[e._v(e._s(t.title))])}))}}])})],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{attrs:{type:"danger"},on:{click:e.handleDelete}},[e._v("删除")]),n("el-button",{on:{click:e.handleCancel}},[e._v("取消选择")])],1)],1)},se=[],ue=(n("4b5e"),n("6c28"),{data:function(){return{multipleSelection:[]}},computed:{notes:function(){return this.$store.getters.notes}},methods:{handleCurrentChange:function(e){this.$router.push({name:"note",params:{from:this.$route.fullPath.slice(1),id:e.id}})},handleSelectionChange:function(e){this.multipleSelection=e},handleDelete:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.multipleSelection.length){e.next=27;break}t=!0,n=!1,r=void 0,e.prev=4,a=this.multipleSelection[Symbol.iterator]();case 6:if(t=(o=a.next()).done){e.next=13;break}return i=o.value,e.next=10,this.$store.dispatch("removeItem",{type:"notes",item:i});case 10:t=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](4),n=!0,r=e.t0;case 19:e.prev=19,e.prev=20,t||null==a.return||a.return();case 22:if(e.prev=22,!n){e.next=25;break}throw r;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}}),e,this,[[4,15,19,27],[20,,22,26]])})));function t(){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.$refs.table.clearSelection()}}}),ce=ue,le=(n("a23d"),Object(c["a"])(ce,ie,se,!1,null,"2042f596",null)),pe=le.exports,de={props:{id:{type:String,required:!1},type:{type:String,required:!1}},components:{TheMenu:j,TheNotesList:pe},beforeDestroy:function(){this.$store.dispatch("clearList",{type:"notes"})},beforeRouteEnter:function(e,t,n){var r=e.params.id,a=e.params.from?e.params.from:e.name.split("-")[0];n((function(e){e.$store.dispatch("clearList",{type:"notes"}),r?e.$store.dispatch("loadSpecialNoteList",{type:a,id:r}):e.$store.dispatch("loadList",{type:"notes"})}))}},fe=de,he=Object(c["a"])(fe,ae,oe,!1,null,null,null),me=he.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("TheMenu"),n("BooksList",{attrs:{type:"notebooks"}})],1)},ve=[],ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",[n("el-table",{ref:"table",attrs:{data:e.books,"highlight-current-row":"","row-key":"id"},on:{"current-change":e.handleCurrentChange,"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"title",label:"标题"}})],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{attrs:{type:"danger"},on:{click:e.handleDelete}},[e._v("删除")]),n("el-button",{on:{click:e.handleCancel}},[e._v("取消选择")])],1)],1)},ke=[],xe={props:{type:{type:String,required:!0}},data:function(){return{multipleSelection:[]}},computed:{books:function(){return this.$store.getters[this.type]}},methods:{handleCurrentChange:function(e){this.$router.push({name:"".concat(this.type,"-notes"),params:{from:this.$route.fullPath.slice(1),id:e.id}})},handleSelectionChange:function(e){this.multipleSelection=e},handleDelete:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.multipleSelection.length){e.next=27;break}t=!0,n=!1,r=void 0,e.prev=4,a=this.multipleSelection[Symbol.iterator]();case 6:if(t=(o=a.next()).done){e.next=13;break}return i=o.value,e.next=10,this.$store.dispatch("removeItem",{type:"notebooks",item:i});case 10:t=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](4),n=!0,r=e.t0;case 19:e.prev=19,e.prev=20,t||null==a.return||a.return();case 22:if(e.prev=22,!n){e.next=25;break}throw r;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}}),e,this,[[4,15,19,27],[20,,22,26]])})));function t(){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.$refs.table.clearSelection()}}},ye=xe,we=Object(c["a"])(ye,ge,ke,!1,null,null,null),$e=we.exports,_e={components:{TheMenu:j,BooksList:$e},created:function(){this.$store.dispatch("loadList",{type:"notebooks"})},beforeDestroy:function(){this.$store.dispatch("clearList",{type:"notebooks"})}},Se=_e,Oe=Object(c["a"])(Se,be,ve,!1,null,null,null),je=Oe.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("TheMenu"),n("BooksList",{attrs:{type:"tags"}})],1)},Te=[],Ce={components:{TheMenu:j,BooksList:$e},created:function(){this.$store.dispatch("loadList",{type:"tags"})},beforeDestroy:function(){this.$store.dispatch("clearList",{type:"tags"})}},Ne=Ce,Ie=Object(c["a"])(Ne,Re,Te,!1,null,null,null),Le=Ie.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"center-wrapper"},[n("el-form",[n("el-form-item",[n("el-input",{attrs:{size:"medium",placeholder:"输入笔记本名称"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),n("el-form-item",[n("el-button",{attrs:{size:"medium"},on:{click:e.onCancel}},[e._v("取消")]),n("el-button",{attrs:{size:"medium",type:"primary",disabled:""===e.value},on:{click:e.onSubmit}},[e._v("创建笔记本")])],1)],1)],1)},Me=[],De={data:function(){return{value:""}},methods:{onCancel:function(){this.$router.push({name:this.$route.params.from,params:{from:this.$route.fullPath.slice(1),id:this.$route.params.id?this.$route.params.id:""}})},onSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("addItem",{type:"notebooks",item:{id:String(Date.now()),title:this.value,notes:[]}});case 2:this.$router.push({name:this.$route.params.from?this.$route.params.from:"home",params:{from:this.$route.fullPath.slice(1),id:this.$route.params.id?this.$route.params.id:""}});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},beforeDestroy:function(){this.$store.dispatch("clearList",{type:"notebooks"})}},Ee=De,ze=(n("a6ad2"),Object(c["a"])(Ee,Pe,Me,!1,null,"b16d963e",null)),Be=ze.exports,Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"center-wrapper"},[n("el-form",[n("el-form-item",[n("el-input",{attrs:{size:"medium",placeholder:"输入标签名称"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),n("el-form-item",[n("el-button",{attrs:{size:"medium"},on:{click:e.onCancel}},[e._v("取消")]),n("el-button",{attrs:{size:"medium",type:"primary",disabled:""===e.value},on:{click:e.onSubmit}},[e._v("创建标签")])],1)],1)],1)},qe=[],Ye={data:function(){return{value:""}},methods:{onCancel:function(){this.$router.push({name:this.$route.params.from,params:{from:this.$route.fullPath.slice(1),id:this.$route.params.id?this.$route.params.id:""}})},onSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("addItem",{type:"tags",item:{id:String(Date.now()),title:this.value,notes:[]}});case 2:this.$router.push({name:this.$route.params.from?this.$route.params.from:"home",params:{from:this.$route.fullPath.slice(1),id:this.$route.params.id?this.$route.params.id:""}});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},beforeDestroy:function(){this.$store.dispatch("clearList",{type:"tags"})}},Ae=Ye,He=(n("f830"),Object(c["a"])(Ae,Ve,qe,!1,null,"7ea2d878",null)),Je=He.exports;a["default"].use(f["a"]);var Fe=new f["a"]({mode:"history",base:"/markdown-note/",routes:[{path:"/",name:"home",component:N},{path:"/new",name:"new",component:re},{path:"/notes",name:"notes",component:me},{path:"/notebooks",name:"notebooks",component:je},{path:"/tags",name:"tags",component:Le},{path:"/new-notebook",name:"new-notebook",component:Be},{path:"/new-tag",name:"new-tag",component:Je},{path:"/note/:id",name:"note",component:re,props:function(e){return{id:e.params.id}}},{path:"/notebooks/:id",name:"notebooks-notes",component:me,props:function(e){return{id:e.params.id,type:e.params.from?e.params.from:e.name.split("-")[0]}}},{path:"/tags/:id",name:"tags-notes",component:me,props:function(e){return{id:e.params.id,type:e.params.from?e.params.from:e.name.split("-")[0]}}}]}),Ge=(n("0b34"),n("591a")),Ke=n("1283"),Qe={dbPromise:{},initDB:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke["a"])("myDB",1,{upgrade:function(e){var n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;e.objectStoreNames.contains(s)||e.createObjectStore(s,{keyPath:"id"})}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}});case 2:this.dbPromise=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),add:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dbPromise.add(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),update:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dbPromise.put(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),read:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dbPromise.get(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),readAll:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dbPromise.getAll(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),delete:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dbPromise.delete(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},Ue={namespaced:!0,state:function(){return{id:null,created:null,title:"",content:"",notebook:null,tags:[]}},getters:{id:function(e){return e.id},created:function(e){return e.created},title:function(e){return e.title},content:function(e){return e.content},notebook:function(e){return e.notebook},tags:function(e){return e.tags},note:function(e){return{id:e.id,created:e.created,title:e.title,content:e.content,notebook:e.notebook,tags:e.tags}}},mutations:{id:function(e,t){e.id=t},created:function(e,t){e.created=t},title:function(e,t){e.title=t},content:function(e,t){e.content=t},notebook:function(e,t){e.notebook=t},tags:function(e,t){e.tags=t},addTag:function(e,t){e.tags.push(t)},removeTag:function(e,t){e.tags.splice(e.tags.findIndex((function(e){return e.id===t.id})),1)}},actions:{initNote:function(e){var t=e.commit,n=Date.now();t("id",String(n)),t("created",n)},loadNote:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.id,e.next=4,Qe.read("notes",a);case 4:o=e.sent,r("id",o.id),r("title",o.title),r("content",o.content),r("created",o.created),r("notebook",o.notebook),r("tags",o.tags);case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),updateNote:function(e,t){var n=e.commit,r=t.title,a=t.content,o=t.notebook;void 0!==r&&n("title",r),void 0!==a&&n("content",a),void 0!==o&&n("notebook",o)},clearNote:function(e){var t=e.commit;t("id",null),t("title",""),t("content",""),t("created",null),t("notebook",null),t("tags",[])},addTag:function(e,t){var n=e.commit,r=t.tag;n("addTag",r)},removeTag:function(e,t){var n=e.commit,r=t.tag;n("removeTag",r)},saveNote:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,p,d,f,h,m,b,v,g,k,x,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getters,e.next=3,Qe.read("notes",n.id);case 3:if(e.sent){e.next=6;break}return e.next=6,Qe.add("notes",{id:n.id,created:n.created,title:n.title,content:n.content,notebook:null,tags:[]});case 6:return e.next=8,Qe.read("notes",n.id);case 8:if(r=e.sent,a=r.notebook,!a){e.next=17;break}return e.next=13,Qe.read("notebooks",a.id);case 13:return o=e.sent,o.notes.splice(o.notes.findIndex((function(e){return e.id===n.id})),1),e.next=17,Qe.update("notebooks",o);case 17:if(i=n.notebook,!i){e.next=25;break}return e.next=21,Qe.read("notebooks",i.id);case 21:return s=e.sent,s.notes.find((function(e){return e.id===n.id}))||s.notes.push({id:n.id}),e.next=25,Qe.update("notebooks",s);case 25:u=r.tags,c=n.tags,l=!0,p=!1,d=void 0,e.prev=30,f=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=m.value,u.find((function(e){return e.id===t.id}))){e.next=9;break}return console.log(t.title),e.next=5,Qe.read("tags",t.id);case 5:return r=e.sent,r.notes.push({id:n.id}),e.next=9,Qe.update("tags",r);case 9:case"end":return e.stop()}}),e)})),h=c[Symbol.iterator]();case 33:if(l=(m=h.next()).done){e.next=38;break}return e.delegateYield(f(),"t0",35);case 35:l=!0,e.next=33;break;case 38:e.next=44;break;case 40:e.prev=40,e.t1=e["catch"](30),p=!0,d=e.t1;case 44:e.prev=44,e.prev=45,l||null==h.return||h.return();case 47:if(e.prev=47,!p){e.next=50;break}throw d;case 50:return e.finish(47);case 51:return e.finish(44);case 52:b=!0,v=!1,g=void 0,e.prev=55,k=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=y.value,c.find((function(e){return e.id===t.id}))){e.next=8;break}return e.next=4,Qe.read("tags",t.id);case 4:return r=e.sent,r.notes.splice(r.notes.findIndex((function(e){return e.id===n.id})),1),e.next=8,Qe.update("tags",r);case 8:case"end":return e.stop()}}),e)})),x=u[Symbol.iterator]();case 58:if(b=(y=x.next()).done){e.next=63;break}return e.delegateYield(k(),"t2",60);case 60:b=!0,e.next=58;break;case 63:e.next=69;break;case 65:e.prev=65,e.t3=e["catch"](55),v=!0,g=e.t3;case 69:e.prev=69,e.prev=70,b||null==x.return||x.return();case 72:if(e.prev=72,!v){e.next=75;break}throw g;case 75:return e.finish(72);case 76:return e.finish(69);case 77:return e.next=79,Qe.update("notes",n.note);case 79:case"end":return e.stop()}}),e,null,[[30,40,44,52],[45,,47,51],[55,65,69,77],[70,,72,76]])})));function t(t){return e.apply(this,arguments)}return t}(),deleteNote:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,u,c,l,p,d,f,h,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.getters,a=t.dispatch,o=n.id,e.next=4,a("loadNote",{id:o});case 4:if(i=r.notebook,!i){e.next=12;break}return e.next=8,Qe.read("notebooks",i.id);case 8:return s=e.sent,s.notes.splice(s.notes.findIndex((function(e){return e.id===r.id})),1),e.next=12,Qe.update("notebooks",s);case 12:if(u=r.tags,!u.length){e.next=44;break}c=!0,l=!1,p=void 0,e.prev=17,d=u[Symbol.iterator]();case 19:if(c=(f=d.next()).done){e.next=30;break}return h=f.value,e.next=23,Qe.read("tags",h.id);case 23:return m=e.sent,m.notes.splice(m.notes.findIndex((function(e){return e.id===r.id})),1),e.next=27,Qe.update("tags",m);case 27:c=!0,e.next=19;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e["catch"](17),l=!0,p=e.t0;case 36:e.prev=36,e.prev=37,c||null==d.return||d.return();case 39:if(e.prev=39,!l){e.next=42;break}throw p;case 42:return e.finish(39);case 43:return e.finish(36);case 44:return a("clearNote"),e.next=47,Qe.delete("notes",o);case 47:case"end":return e.stop()}}),e,null,[[17,32,36,44],[37,,39,43]])})));function t(t,n){return e.apply(this,arguments)}return t}()}};a["default"].use(Ge["a"]);var We=new Ge["a"].Store({strict:!1,modules:{note:Ue},state:function(){return{notebooks:[],tags:[],notes:[]}},getters:{notebooks:function(e){return e.notebooks},tags:function(e){return e.tags},notes:function(e){return e.notes}},mutations:{removeItem:function(e,t){var n=t.type,r=t.id,a=e[n].findIndex((function(e){return e.id===r}));e[n].splice(a,1)},addItem:function(e,t){var n=t.type,r=t.item;e[n].push(r)},updateItem:function(e,t){var n=t.type,r=t.item,a=e[n].findIndex((function(e){return e.id===r.id}));e[n][a]=r},clearList:function(e,t){var n=t.type;e[n]=[]}},actions:{removeItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,u,c,l,p,d,f,h,m,b,v,g,k,x,y,w,$,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,a=t.dispatch,o=n.type,i=n.item,r("removeItem",{type:o,id:i.id}),e.t0=o,e.next="notes"===e.t0?6:"notebooks"===e.t0?8:"tags"===e.t0?45:82;break;case 6:return a("note/deleteNote",{id:i.id}),e.abrupt("break",83);case 8:return e.next=10,Qe.read("notebooks",i.id);case 10:s=e.sent,u=s.notes,c=!0,l=!1,p=void 0,e.prev=15,d=u[Symbol.iterator]();case 17:if(c=(f=d.next()).done){e.next=28;break}return h=f.value,e.next=21,Qe.read("notes",h.id);case 21:return m=e.sent,m.notebook=null,e.next=25,Qe.update("notes",m);case 25:c=!0,e.next=17;break;case 28:e.next=34;break;case 30:e.prev=30,e.t1=e["catch"](15),l=!0,p=e.t1;case 34:e.prev=34,e.prev=35,c||null==d.return||d.return();case 37:if(e.prev=37,!l){e.next=40;break}throw p;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return e.next=44,Qe.delete("notebooks",i.id);case 44:return e.abrupt("break",83);case 45:return e.next=47,Qe.read("tags",i.id);case 47:b=e.sent,v=b.notes,g=!0,k=!1,x=void 0,e.prev=52,y=v[Symbol.iterator]();case 54:if(g=(w=y.next()).done){e.next=65;break}return $=w.value,e.next=58,Qe.read("notes",$.id);case 58:return _=e.sent,_.tags.splice(_.tags.findIndex((function(e){return e.id===i.id})),1),e.next=62,Qe.update("notes",_);case 62:g=!0,e.next=54;break;case 65:e.next=71;break;case 67:e.prev=67,e.t2=e["catch"](52),k=!0,x=e.t2;case 71:e.prev=71,e.prev=72,g||null==y.return||y.return();case 74:if(e.prev=74,!k){e.next=77;break}throw x;case 77:return e.finish(74);case 78:return e.finish(71);case 79:return e.next=81,Qe.delete("tags",i.id);case 81:return e.abrupt("break",83);case 82:return e.abrupt("break",83);case 83:case"end":return e.stop()}}),e,null,[[15,30,34,42],[35,,37,41],[52,67,71,79],[72,,74,78]])})));function t(t,n){return e.apply(this,arguments)}return t}(),addItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.type,o=n.item,r("addItem",{type:a,item:o}),e.next=5,Qe.add(a,o);case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),updateItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.type,o=n.item,r("updateItem",{type:a,item:o}),e.next=5,Qe.update(a,o);case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),loadList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,u,c,l,p,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.type,e.next=4,Qe.readAll(a);case 4:for(o=e.sent,i=!0,s=!1,u=void 0,e.prev=8,c=o[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)p=l.value,d={},d="notes"===a?{id:p.id,created:p.created,title:p.title,notebook:p.notebook,tags:p.tags}:p,r("addItem",{type:a,item:d});e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](8),s=!0,u=e.t0;case 16:e.prev=16,e.prev=17,i||null==c.return||c.return();case 19:if(e.prev=19,!s){e.next=22;break}throw u;case 22:return e.finish(19);case 23:return e.finish(16);case 24:case"end":return e.stop()}}),e,null,[[8,12,16,24],[17,,19,23]])})));function t(t,n){return e.apply(this,arguments)}return t}(),loadSpecialNoteList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,u,c,l,p,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.type,o=n.id,e.next=4,Qe.read(a,o);case 4:i=e.sent,s=!0,u=!1,c=void 0,e.prev=8,l=i.notes[Symbol.iterator]();case 10:if(s=(p=l.next()).done){e.next=19;break}return d=p.value,e.next=14,Qe.read("notes",d.id);case 14:f=e.sent,r("addItem",{type:"notes",item:{id:f.id,created:f.created,title:f.title,notebook:f.notebook,tags:f.tags}});case 16:s=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e["catch"](8),u=!0,c=e.t0;case 25:e.prev=25,e.prev=26,s||null==l.return||l.return();case 28:if(e.prev=28,!u){e.next=31;break}throw c;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}}),e,null,[[8,21,25,33],[26,,28,32]])})));function t(t,n){return e.apply(this,arguments)}return t}(),clearList:function(e,t){var n=e.commit,r=t.type;n("clearList",{type:r})}}});function Xe(){return Ze.apply(this,arguments)}function Ze(){return Ze=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Qe.initDB(["notes","notebooks","tags"]);case 2:new a["default"]({el:"#app",router:Fe,store:We,render:function(e){return e(d)}});case 3:case"end":return e.stop()}}),e)}))),Ze.apply(this,arguments)}a["default"].config.productionTip=!1,a["default"].use(i.a,{size:"small",zIndex:3e3}),a["default"].use(n("e12b")),Xe()},7400:function(e,t,n){"use strict";var r=n("25b0"),a=n.n(r);a.a},"799a":function(e,t,n){},a23d:function(e,t,n){"use strict";var r=n("f854"),a=n.n(r);a.a},a6ad2:function(e,t,n){"use strict";var r=n("3ace"),a=n.n(r);a.a},b211:function(e,t,n){"use strict";var r=n("0b7b"),a=n.n(r);a.a},b778:function(e,t,n){"use strict";var r=n("2294"),a=n.n(r);a.a},be43:function(e,t,n){},bf02:function(e,t,n){},f830:function(e,t,n){"use strict";var r=n("31b4"),a=n.n(r);a.a},f854:function(e,t,n){}});
//# sourceMappingURL=app.e582a8de.js.map